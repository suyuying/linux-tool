#!/bin/bash
#tips:please not input 25:XX or -1:XXX, and first variable must small than second variable
#Toget: generage time in regex mode, and can be used to grep log ex grep -E "2022-4-5 (13:[2][1-9]|13:[3-5][0-9]|1[4-6]:[0-5][0-9]|17:[0-2][0-9]|17:[3][0-4])"
#how to use : it will give global variable t ,content would be like 13:[2][1-9]|13:[3-5][0-9]|1[4-7]:[0-5][0-9]|18:[0-2][0-9]|18:[3][0-2]
#這邊是用sed去讀時間ex 11:25去個別做成變數，以方便之後之後進行判斷式比對
timeregex() {
read -p "input : ex 13:20" lines
local a=$(echo $lines | sed -r "s/([0-9])([0-9]):([0-9])([0-9])/\1/g")
local b=$(echo $lines | sed -r "s/([0-9])([0-9]):([0-9])([0-9])/\2/g")
local c=$(echo $lines | sed -r "s/([0-9])([0-9]):([0-9])([0-9])/\3/g")
local d=$(echo $lines | sed -r "s/([0-9])([0-9]):([0-9])([0-9])/\4/g")
echo "$a$b:$c$d"
read -p "input : ex 18:32 " endlines
local e=$(echo $endlines | sed -r "s/([0-9])([0-9]):([0-9])([0-9])/\1/g")
local f=$(echo $endlines | sed -r "s/([0-9])([0-9]):([0-9])([0-9])/\2/g")
local g=$(echo $endlines | sed -r "s/([0-9])([0-9]):([0-9])([0-9])/\3/g")
local h=$(echo $endlines | sed -r "s/([0-9])([0-9]):([0-9])([0-9])/\4/g")
echo "$e$f:$g$h"

#開始判斷
if (( $a == 0 & $e == 0 )); then
  if (( $b == $f )); then
    if (( $c == $g )); then
      t=$(echo "$a$b:$c[$d-$h]")
    elif (( $g-$c == 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$g][0-$h]")
    elif (( $g-$c > 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-$[g-1]][0-9]|$a$b:[$g][0-$h]")
    fi 
  
  elif (( $f-$b == 1 ));then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a$f:[0-$[g-1]][0-9]|$a$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$f:[0-$[g-1]][0-9]|$a$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$f:[$g][0-$h]")
    fi
  elif (( $f-$b > 1 ));then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-$[f-1]]:[0-5][0-9]|$a$f:[0-$[g-1]][0-9]|$a$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-$[f-1]]:[0-5][0-9]|$a$f:[0-$[g-1]][0-9]|$a$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-$[f-1]]:[0-5][0-9]|$a$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-$[f-1]]:[0-5][0-9]|$a$f:[$g][0-$h]")
    fi
  fi
fi


if (( $a == 1 & $e == 1 )); then
  if (( $b == $f )); then
    if (( $c == $g )); then
      t=$(echo "$a$b:$c[$d-$h]")
    elif (( $g-$c == 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$g][0-$h]")
    elif (( $g-$c > 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-$[g-1]][0-9]|$a$b:[$g][0-$h]")
    fi 
  
  elif (( $f-$b == 1 ));then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a$f:[0-$[g-1]][0-9]|$a$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$f:[0-$[g-1]][0-9]|$a$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$f:[$g][0-$h]")
    fi
  elif (( $f-$b > 1 ));then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-$[f-1]]:[0-5][0-9]|$a$f:[0-$[g-1]][0-9]|$a$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-$[f-1]]:[0-5][0-9]|$a$f:[0-$[g-1]][0-9]|$a$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-$[f-1]]:[0-5][0-9]|$a$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-$[f-1]]:[0-5][0-9]|$a$f:[$g][0-$h]")
    fi
  fi
fi


if (( $a == 2 & $e == 2 )); then
  if (( $b == $f )); then
    if (( $c == $g )); then
      t=$(echo "$a$b:$c[$d-$h]")
    elif (( $g-$c == 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$g][0-$h]")
    elif (( $g-$c > 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-$[g-1]][0-9]|$a$b:[$g][0-$h]")
    fi 
  
  elif (( $f-$b == 1 ));then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a$f:[0-$[g-1]][0-9]|$a$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$f:[0-$[g-1]][0-9]|$a$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$f:[$g][0-$h]")
    fi
  elif (( $f-$b > 1 ));then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-$[f-1]]:[0-5][0-9]|$a$f:[0-$[g-1]][0-9]|$a$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-$[f-1]]:[0-5][0-9]|$a$f:[0-$[g-1]][0-9]|$a$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-$[f-1]]:[0-5][0-9]|$a$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-$[f-1]]:[0-5][0-9]|$a$f:[$g][0-$h]")
    fi
  fi
fi


if (( $a == 0 & $e == 1 )); then
  if (( $b < 9 & $f>0 )); then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[$g][0-$h]")
    fi
  fi
  if (( $b == 9 & $f>0 )); then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[$g][0-$h]")
    fi
  fi
  if (( $b < 9 & $f==0 )); then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-9]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-9]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-9]:[0-5][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-9]:[0-5][0-9]|$e$f:[$g][0-$h]")
    fi
  fi
  if (( $b == 9 & $f==0 )); then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$e$f:[$g][0-$h]")
    fi
  fi
fi



if (( $a == 1 & $e == 2 )); then
  if (( $b < 9 & $f>0 )); then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[$g][0-$h]")
    fi
  fi
  if (( $b == 9 & $f>0 )); then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[$g][0-$h]")
    fi
  fi
  if (( $b < 9 & $f==0 )); then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-9]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-9]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-9]:[0-5][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-9]:[0-5][0-9]|$e$f:[$g][0-$h]")
    fi
  fi
  if (( $b == 9 & $f==0 )); then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$e$f:[$g][0-$h]")
    fi
  fi
fi



if (( $a == 0 & $e == 2 )); then
  if (( $b < 9 & $f>0 )); then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-9]:[0-5][0-9]|[1][0-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-9]:[0-5][0-9]|[1][0-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-9]:[0-5][0-9]|[1][0-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-9]:[0-5][0-9]|[1][0-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[$g][0-$h]")
    fi
  fi
  if (( $b == 9 & $f>0 )); then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|[1][0-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|[1][0-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|[1][0-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|[1][0-9]:[0-5][0-9]|$e[0-$[f-1]]:[0-5][0-9]|$e$f:[$g][0-$h]")
    fi
  fi
  if (( $b < 9 & $f==0 )); then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-9]:[0-5][0-9]|[1][0-9]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-9]:[0-5][0-9]|[1][0-9]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|$a[$[b+1]-9]:[0-5][0-9]|[1][0-9]:[0-5][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a[$[b+1]-9]:[0-5][0-9]|[1][0-9]:[0-5][0-9]|$e$f:[$g][0-$h]")
    fi
  fi
  if (( $b == 9 & $f==0 )); then
    if (( $c <= 4 & $g >= 1 )); then
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|[1][0-9]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g >= 1 ));then 
      t=$(echo "$a$b:[$c][$d-9]|[1][0-9]:[0-5][0-9]|$e$f:[0-$[g-1]][0-9]|$e$f:[$g][0-$h]")
    elif (( $c <= 4 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|$a$b:[$[c+1]-5][0-9]|[1][0-9]:[0-5][0-9]|$e$f:[$g][0-$h]")
    elif (( $c == 5 & $g == 0 ));then 
      t=$(echo "$a$b:[$c][$d-9]|[1][0-9]:[0-5][0-9]|$e$f:[$g][0-$h]")
    fi
  fi
fi
echo  "\"($t)\""
}
while true
  do
    timeregex
    exit 0
  done
clear

